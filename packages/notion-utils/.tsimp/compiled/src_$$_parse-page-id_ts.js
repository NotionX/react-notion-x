import { idToUuid } from './id-to-uuid';
const pageIdRe = /\b([\da-f]{32})\b/;
// TODO
// eslint-disable-next-line security/detect-unsafe-regex
const pageId2Re = /\b([\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12})\b/;
/**
 * Robustly extracts the notion page ID from a notion URL or pathname suffix.
 *
 * Defaults to returning a UUID (with dashes).
 */
export const parsePageId = (id = '', { uuid = true } = {}) => {
    if (!id)
        return null;
    id = id.split('?')[0];
    if (!id)
        return null;
    const match = id.match(pageIdRe);
    if (match) {
        return uuid ? idToUuid(match[1]) : match[1];
    }
    const match2 = id.match(pageId2Re);
    if (match2) {
        return uuid ? match2[1] : match2[1].replaceAll('-', '');
    }
    return null;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyc2UtcGFnZS1pZC5qcyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvdGZpc2NoZXIvZGV2L21vZHVsZXMvcmVhY3Qtbm90aW9uLXgvcGFja2FnZXMvbm90aW9uLXV0aWxzL3NyYy8iLCJzb3VyY2VzIjpbInBhcnNlLXBhZ2UtaWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGNBQWMsQ0FBQTtBQUV2QyxNQUFNLFFBQVEsR0FBRyxtQkFBbUIsQ0FBQTtBQUVwQyxPQUFPO0FBQ1Asd0RBQXdEO0FBQ3hELE1BQU0sU0FBUyxHQUFHLGdEQUFnRCxDQUFBO0FBRWxFOzs7O0dBSUc7QUFDSCxNQUFNLENBQUMsTUFBTSxXQUFXLEdBQUcsQ0FDekIsS0FBb0IsRUFBRSxFQUN0QixFQUFFLElBQUksR0FBRyxJQUFJLEtBQXlCLEVBQUUsRUFDeEMsRUFBRTtJQUNGLElBQUksQ0FBQyxFQUFFO1FBQUUsT0FBTyxJQUFJLENBQUE7SUFFcEIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFFLENBQUE7SUFDdEIsSUFBSSxDQUFDLEVBQUU7UUFBRSxPQUFPLElBQUksQ0FBQTtJQUVwQixNQUFNLEtBQUssR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBRWhDLElBQUksS0FBSyxFQUFFLENBQUM7UUFDVixPQUFPLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDN0MsQ0FBQztJQUVELE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUE7SUFDbEMsSUFBSSxNQUFNLEVBQUUsQ0FBQztRQUNYLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUUsQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFBO0lBQzFELENBQUM7SUFFRCxPQUFPLElBQUksQ0FBQTtBQUNiLENBQUMsQ0FBQSJ9